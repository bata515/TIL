# JSON-RPC
JSON-RPCは、リモートプロシージャコール（RPC）を実行するための軽量なプロトコルです。JSON形式でメッセージを送受信し、サーバーとクライアント間での通信するやつ。
AI エージェント開発でもこのJSON-RPCが注目されていて、Anthropicが提唱したMCP(Model Context Protocol)やGoogleのAgent2Agent Protocol (A2A)など、AIエージェント間の通信に利用されたりしている。

## JSON-RPCの基本的な構造
JSON-RPC のリクエストに含めるJSONは通常、以下のようなフィールドを持っている。
リクエストの例)
```json
{
  "jsonrpc": "2.0",
  "method": "subtract",
  "params": [42, 23],
  "id": 1
}
```

- jsonrpc: プロトコルバージョンを示すフィールド。例: "jsonrpc": "2.0"
- method: 呼び出す対象のメソッド名。例: "method": "subtract"
- params: メソッドに渡すパラメータ。通常は配列形式やオブジェクト形式が使われます。例: "params": [42, 23]
- id: リクエストに対する識別子。複数リクエストの区別やレスポンスとリクエストの関連付けに利用されます。

レスポンスの例)
```json
{
  "jsonrpc": "2.0",
  "result": 19,
  "id": 1
}
```

- jsonrpc: バージョン情報（リクエストと同じく "2.0"）。
- result: 正常に処理された場合、実行結果が格納されるフィールド。
- error: エラーが発生した場合、エラーコードやメッセージが含まれるフィールド。
- id: リクエストの id と同じ値。これにより、どのリクエストに対するレスポンスかが分かります。

## JSON-RPCのエラーコード
以下は、よく使われる JSON-RPC のエラーコードとその意味です。

| コード     | メッセージ       | 説明                                                         |
|------------|------------------|--------------------------------------------------------------|
| -32700     | 解析エラー       | サーバーが無効な JSON を受信した場合に発生します。JSON テキストの解析中にエラーが起きた状況です。 |
| -32600     | 無効なリクエスト | 送信された JSON が有効な JSON-RPC リクエストオブジェクトではない場合に返されます。               |
| -32601     | メソッドが見つかりません | 指定されたメソッドが存在しないため、呼び出しが行えないときに返されるエラーです。               |
| -32602     | 無効なパラメータ | 呼び出されたメソッドのパラメータが無効、もしくは不足している場合に返されます。               |
| -32603     | サーバーエラー   | サーバー側で実装エラーが発生した場合に予約されているエラーコードです。                           |
